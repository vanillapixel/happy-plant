<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Happy plants — Quick Reference</title>
    <link rel="stylesheet" href="./src/styles.css" />
    <link rel="icon" href="./assets/img/happy-plants-logo.png" type="image/x-icon" />
    <meta name="description"
        content="Quick reference for ideal pH and moisture levels for common plants like basil, sage, cherry tomatoes, and cat grass. Includes moisture targets for daily checks." />
    <meta name="keywords"
        content="plant care, pH levels, moisture levels, basil, sage, cherry tomatoes, cat grass, gardening tips" />
    <meta name="author" content="Plant Enthusiast" />
    <meta name="robots" content="index, follow" />
    <meta property="og:title" content="Happy plants — Quick Reference" />
    <meta property="og:description"
        content="Quick reference for ideal pH and moisture levels for common plants like basil, sage, cherry tomatoes, and cat grass. Includes moisture targets for daily checks." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://example.com/plant-needs" />
    <meta property="og:image" content="./assets/img/happy-plants-logo.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Happy plants — Quick Reference" />
    <meta name="twitter:description"
        content="Quick reference for ideal pH and moisture levels for common plants like basil, sage, cherry tomatoes, and cat grass. Includes moisture targets for daily checks." />
    <meta name="twitter:image" content="./assets/img/happy-plants-logo.png" />
    <link rel="canonical" href="https://ithinkitsfun.it/happy-plants" />
    <link rel="alternate" href="https://ithinkitsfun.it/happy-plants" hreflang="en" />
    <script src="./src/main.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.6.2/sql-wasm.js"></script>
    <script defer>
        let db;
        async function initDatabase() {
            // create a sqlite
            const SQL = await initSqlJs({
                locateFile: filename => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.6.2/${filename}`
            });
            db = new SQL.Database();
            // Create a table for plant readings
            db.run(`CREATE TABLE IF NOT EXISTS readings (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                plant TEXT NOT NULL,
                ph REAL NOT NULL,
                moisture INTEGER NOT NULL,
                date TEXT NOT NULL DEFAULT (datetime('now'))
            )`);
            console.log('Database initialized');
        }
        initDatabase();
    </script>
</head>

<body>
    <div class=" wrap">
        <header>
            <div class="logo"><img src="./assets/img/happy-plants-logo.png" alt="Happy plants logo" /></div>
            <div>
                <h1>Happy plants</h1>
                <p class="lead">pH & moisture targets for quick daily checks</p>
            </div>
        </header>
        <div class="card" id="tableCard">
            <table aria-label="Happy plants table">
                <thead>
                    <tr>
                        <th>Plant</th>
                        <th>Ideal pH</th>
                        <th>Soil moisture (%)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Basil</strong><br><small>Ocimum basilicum</small></td>
                        <td div class="ph-targets">6.0-7.0</td>
                        <td>
                            <div class="moisture-targets"><span><i class="fas fa-sun yellow"></i>60% </span><span><i
                                        class="fas fa-moon"></i>75% </span></div>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Sage</strong><br><small>Salvia officinalis</small></td>
                        <td div class="ph-targets">6.0-7.0</td>
                        <td>
                            <div class="moisture-targets"><span><i class="fas fa-sun yellow"></i>40% </span><span><i
                                        class="fas fa-moon"></i>55% </span></div>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Cherry tomatoes</strong><br><small>(varieties)</small></td>
                        <td div class="ph-targets">6.0-6.5</td>
                        <td>
                            <div class="moisture-targets"><span><i class="fas fa-sun yellow"></i>60% </span><span><i
                                        class="fas fa-moon"></i>80% </span></div>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Cat grass</strong><br><small>(oat/barley/wheat grass)</small></td>
                        <td div class="ph-targets">6.0-7.0</td>
                        <td>
                            <div class="moisture-targets"><span><i class="fas fa-sun yellow"></i>65% </span><span><i
                                        class="fas fa-moon"></i>85% </span></div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <strong>Mint</strong>
                            <br>
                            <small>(Mentha spp.)</small>
                        </td>
                        <td>6.0–7.0</td>
                        <td>
                            <div class="moisture-targets"><span><i class="fas fa-sun yellow"></i>70% </span><span><i
                                        class="fas fa-moon"></i>85% </span></div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="btns">
                <button id="addReadingBtn">
                    <i class="fas fa-plus"></i>
                    Add daily reading</button>
                <button id="viewChartBtn" class="ghost">
                    <i class="fas fa-chart-bar"></i>
                    View
                    chart</button>
            </div>
        </div>
        <p>Notes:</p>
        <ul class="notes">
            <li>
                <i class="fas fa-leaf green"></i>Basil and cherry tomatoes like steady moisture but not waterlogged
                soil
            </li>
            <li>
                <i class="fas fa-seedling green"></i>Sage prefers drier conditions,
                so let the soil dry out a bit between waterings
            </li>
            <li>
                <img class="icon" src="./assets/img/icons/grass-icon.svg" alt="">Cat grass likes consistently moist
                soil,
                especially when young
            </li>
            <li>
                <img class="icon" src="./assets/img/icons/cherry-tomatoes-icon.svg">Cherry tomatoes can tolerate a bit
                more moisture, especially in warmer weather
            </li>
        </ul>
        <br>
        <ul class="notes">
            <li>Adjust pH with organic amendments like lime (to raise) or sulfur/vinegar (to lower)</li>
            <li><i class="fas fa-sun yellow"></i>aim for the lower end of moisture targets</li>
            <li><i class="fas fa-moon"></i>aim for the higher end of moisture targets</li>
    </div>
    <canvas id="myChart" width="400" height="200"></canvas>
    <script>
        document.getElementById('addReadingBtn').addEventListener('click', function () {
            // Create a form to add daily readings
            const form = document.createElement('form');
            form.innerHTML = ` <label for="plant" >Select Plant:</label> <select id="plant" > <option value="basil" >Basil</option> <option value="sage" >Sage</option> <option value="cherryTomatoes" >Cherry Tomatoes</option> <option value="catGrass" >Cat Grass</option> </select> <label for="ph" >pH Level:</label> <input type="number" id="ph" step="0.1" required> <label for="moisture" >Moisture Level (%):</label> <input type="number" id="moisture" step="1" required> <button type="submit" >Save Reading</button> `;
            document.body.appendChild(form);

            form.addEventListener('submit', function (event) {
                event.preventDefault();
                const plant = document.getElementById('plant').value;
                const ph = document.getElementById('ph').value;
                const moisture = document.getElementById('moisture').value;

                form.reset();
            });
        });

        // button to view the data in a chart
        document.getElementById('viewChartBtn').addEventListener('click', function () {
            // Create a simple chart using Chart.js or similar library
            // You can implement chart rendering logic here

            // db call to fetch readings and render chart
            console.log('Fetching readings for chart...');

            // Example: Fetch data from SQLite and render it in a chart
            // This is a placeholder for actual chart rendering logic
            const chartData = [
                {
                    plant: 'Basil', ph: 6.5, moisture: 60
                },
                {
                    plant: 'Sage', ph: 6.5, moisture: 40
                },
                {
                    plant: 'Cherry Tomatoes', ph: 6.2, moisture: 70
                },
                {
                    plant: 'Cat Grass', ph: 6.5, moisture: 75
                }
            ];
            console.log('Chart data:', chartData);
            const ctx = document.getElementById('myChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: chartData.map(item => item.plant),
                    datasets: [{
                        label: 'pH Level',
                        data: chartData.map(item => item.ph),
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }, {
                        label: 'Moisture Level (%)',
                        data: chartData.map(item => item.moisture),
                        backgroundColor: 'rgba(153, 102, 255, 0.2)',
                        borderColor: 'rgba(153, 102, 255, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        });
    </script>
</body>

</html>